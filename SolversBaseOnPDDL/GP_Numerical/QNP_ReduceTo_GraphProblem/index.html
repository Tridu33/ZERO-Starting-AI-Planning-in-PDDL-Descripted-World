<!DOCTYPE html><html> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=author content=tridu33><link rel="shortcut icon" href=../../../img/favicon.ico><title>QNP_ReduceTo_GraphProblem &mdash; AI Planning in PDDL-Descripted World</title><link rel=stylesheet href="//fonts.googleapis.com/css?family=Lato:400,700"><link rel=stylesheet href=//cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.8.1/css/all.css><link rel=stylesheet href=//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css><link rel=stylesheet href=../../../css/theme.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css><script src=//code.jquery.com/jquery-2.1.1.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js></script><script>
        hljs.initHighlightingOnLoad();
    </script></head> <body ontouchstart> <div id=container> <aside> <div class=home> <div class=title> <button class=hamburger></button> <a href=../../.. class=site-name> AI Planning in PDDL-Descripted World</a> </div> <div class=search> <div role=search> <form id=rtd-search-form class=wy-form action=../../../search.html method=get> <input type=text name=q placeholder="Search docs" title="Type search term here"> </form> </div> </div> </div> <nav class=nav> <ul class=root> <li class=toctree-l1><a class=nav-item href=../../..>Home</a></li> <li class=toctree-l1><button class="section nav-item">规划界黑话</button> <ul class=subnav> <li class=toctree-l2><button class="section nav-item hide">PDDL进化史</button> <ul class="subnav hide"> <li class=toctree-l3><a href=../../../PlanLanguages/ADL/ class=nav-item>ADL</a></li> <li class=toctree-l3><a href=../../../PlanLanguages/STRIPS%E8%AF%AD%E8%A8%80/ class=nav-item>STRIPS</a></li> <li class=toctree-l3><button class="section nav-item hide">PDDL</button> <ul class="subnav hide"> <li class=toctree-l4><a href=../../../PlanLanguages/PDDL%E8%AF%AD%E8%A8%80/ class=nav-item>HelloPDDL</a></li> <li class=toctree-l4> <a href=../../../PlanLanguages/version/ class=nav-item>版本迭代</a></li> <li class=toctree-l4><a href=../../../PlanLanguages/Extension%20to%20PDDL%28SAS%29/ class=nav-item>PDDL扩展</a></li> </ul></li> </ul></li> <li class=toctree-l2><button class="section nav-item hide">机器人世界</button> <ul class="subnav hide"> <li class=toctree-l3><a href=../../../PlanLanguages/Golog/Golog_ROS/ class=nav-item>Golog</a></li> </ul></li> </ul></li> <li class=toctree-l1><button class="section nav-item">PDDL使用</button> <ul class=subnav> <li class=toctree-l2> <a href=../../../Usage/LocalSolvers/ class=nav-item>本地环境使用</a></li> <li class=toctree-l2> <a href=../../../Usage/OnlineSolver/ class=nav-item>线上求解器使用</a></li> <li class=toctree-l2> <a href=../../../Usage/VSCode/ class=nav-item>Visual Studio Code使用</a></li> <li class=toctree-l2><button class="section nav-item hide">经典demos</button> <ul class="subnav hide"> <li class=toctree-l3><a href=../../%E5%88%8A%E7%89%A9%E4%B8%8A%E7%BB%8F%E5%85%B8demos/ class=nav-item>刊物上经典demos</a></li> <li class=toctree-l3><a href=../../PDDL%20Benchmark%20Instances/ class=nav-item>BenchMark</a></li> </ul></li> </ul></li> <li class=toctree-l1><button class="section nav-item">PDDL语法</button> <ul class=subnav> <li class=toctree-l2> <a href=../../../Syntax/PDDL%20axioms/ class=nav-item>语法总览</a></li> <li class=toctree-l2> <a href=../../../Syntax/PDDLParser/ class=nav-item>Parser</a></li> </ul></li> <li class=toctree-l1><button class="section nav-item">PDDL-Descripted AI Planning World</button> <ul class=subnav> <li class=toctree-l2><button class="section nav-item hide">Papers</button> <ul class="subnav hide"> <li class=toctree-l3><a href=../../../Papers/A%20review%20of%20generalized%20planning/ class=nav-item>reviewOfGP</a></li> <li class=toctree-l3><a href=../../../Papers/GP_summary/ class=nav-item>GP_summary</a></li> <li class=toctree-l3><a href=../../../Papers/A%20Review%20of%20Machine%20Learning%20for%20Automated%20Planning/ class=nav-item>ReviewOfMLforAP</a></li> <li class=toctree-l3><a href=../../../Papers/Generalized%20Planning%20With%20Deep%20Reinforcement%20Learning/ class=nav-item>GPwithDeep-RL</a></li> <li class=toctree-l3><a href=../../../Papers/Survey%20of%20research%20literature/ class=nav-item>researchSurvey</a></li> </ul></li> <li class="toctree-l2 current"><button class="section nav-item">SolversBaseOnPDDL</button> <ul class=subnav> <li class=toctree-l3><a href=../../PyperPlan_STRIPS/ class=nav-item>PyperPlan_STRIPS</a></li> <li class=toctree-l3><a href=../../Solvers/ class=nav-item>Solvers</a></li> <li class=toctree-l3><button class="section nav-item hide">CP</button> <ul class="subnav hide"> <li class=toctree-l4><a href=../../CP/ffPlaner/ class=nav-item>FF</a></li> <li class=toctree-l4><a href=../../CP/fast-downward/ class=nav-item>FD</a></li> <li class=toctree-l4><a href=../../CP/LAPKT%E8%BD%BB%E9%87%8F%E8%87%AA%E5%8A%A8%E8%A7%84%E5%88%92%E5%B7%A5%E5%85%B7%E5%8C%85/ class=nav-item>LAPKT轻量自动规划工具包</a></li> </ul></li> <li class="toctree-l3 current"><button class="section nav-item">GP_Numerical</button> <ul class=subnav> <li class="toctree-l4 current"> <a href=./ class="nav-item current">QNP_ReduceTo_GraphProblem</a> <ul class=subnav> </ul></li> <li class=toctree-l4><a href=../%E5%9B%BE%E6%B3%95QNP/ class=nav-item>图法QNP</a></li> <li class=toctree-l4><a href=../LPG%EF%BC%88%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%E8%A7%84%E5%88%92%E5%9B%BE%EF%BC%89/ class=nav-item>LPG</a></li> <li class=toctree-l4><a href=../grahPlan/ class=nav-item>grahPlan</a></li> <li class=toctree-l4><a href=../SGPlan6/ class=nav-item>SGPlan6</a></li> <li class=toctree-l4><a href=../PRP/ class=nav-item>PRP</a></li> <li class=toctree-l4><a href=../myND/ class=nav-item>myND</a></li> </ul></li> <li class=toctree-l3><button class="section nav-item hide">QNP_FONS_SAT</button> <ul class="subnav hide"> <li class=toctree-l4><a href=../QNP_FONS_SAT/CNF_py/ class=nav-item>CNF_py</a></li> <li class=toctree-l4><a href=../QNP_FONS_SAT/FOND/ class=nav-item>FOND</a></li> <li class=toctree-l4><a href=../QNP_FONS_SAT/QA_FOND/ class=nav-item>QA_FOND</a></li> <li class=toctree-l4><a href=../QNP_FONS_SAT/%E4%BE%8B%E8%A7%A3FOND%2BCNF/ class=nav-item>例解FOND</a></li> <li class=toctree-l4><a href=../QNP_FONS_SAT/QNP/ class=nav-item>QNP</a></li> <li class=toctree-l4><a href=../QNP_FONS_SAT/qnp2fond/ class=nav-item>qnp2fond</a></li> <li class=toctree-l4><a href=../QNP_FONS_SAT/QNP2SAT/ class=nav-item>QNP2SAT</a></li> </ul></li> </ul></li> <li class=toctree-l2><button class="section nav-item hide">PDDL-plan-validators</button> <ul class="subnav hide"> <li class=toctree-l3><a href=../../../Extensions/PDDL-plan-validator/PDDL-plan-validator/ class=nav-item>validators</a></li> <li class=toctree-l3><a href=../../../Extensions/PDDL-plan-validator/Lisp-pddl-INVAL-validator/ class=nav-item>INVAL</a></li> <li class=toctree-l3><a href=../../../Extensions/PDDL-plan-validator/VScode-PDDL%E6%8F%92%E4%BB%B6VAL/ class=nav-item>VAL</a></li> </ul></li> <li class=toctree-l2><button class="section nav-item hide">PDDL-Auto Planning</button> <ul class="subnav hide"> <li class=toctree-l3><a href=../../../Extensions/AP/PDDL4j_Java%20for%E8%87%AA%E5%8A%A8%E8%A7%84%E5%88%92/ class=nav-item>PDDL4j</a></li> <li class=toctree-l3><a href=../../../Extensions/AP/Tarski%20-%20An%20AI%20Planning%20Modeling%20Framework/ class=nav-item>Tarski</a></li> <li class=toctree-l3><a href=../../../Extensions/AP/%E5%AE%9E%E4%BE%8B%E4%B8%AD%E5%AD%A6%E4%B9%A0QNP%E5%AE%9A%E4%B9%89%E5%AE%9E%E7%8E%B0AP%28AutomatedPlanning%29/ class=nav-item>QNP2AP</a></li> <li class=toctree-l3><a href=../../../Extensions/RL/PDDLGYM/ class=nav-item>PDDLGYM</a></li> <li class=toctree-l3><a href=../../../Extensions/RL/RLPlanPapers/ class=nav-item>PDDL+RL强化学习</a></li> </ul></li> </ul></li> <li class=toctree-l1><button class="section nav-item">进击的PDDL</button> <ul class=subnav> <li class=toctree-l2><button class="section nav-item hide">Curry-Howard correspondence</button> <ul class="subnav hide"> <li class=toctree-l3><a href=../../../FurtherMore/%E6%8E%A7%E5%88%B6%E6%B5%81%E5%9B%BECFG%E8%AF%AD%E4%B9%89%E7%BD%91%E7%BB%9Cpetri%E8%BF%81%E7%A7%BB%E7%B3%BB%E7%BB%9F%E6%89%A9%E5%B1%95%E5%BA%94%E7%94%A8/ class=nav-item>CFG语义网络</a></li> <li class=toctree-l3><a href=../../../FurtherMore/PDDL-Solver2AST/ class=nav-item>PDDL-Solver2AST</a></li> <li class=toctree-l3><a href=../../../FurtherMore/TransitionSystemModelCheck/ class=nav-item>CFG=TransitionSystemModelCheck.md</a></li> <li class=toctree-l3><a href=../../../FurtherMore/qnp2ast2program/ class=nav-item>qnp2ast2program</a></li> </ul></li> </ul></li> <li class=toctree-l1> <a class=nav-item href=https://github.com/Tridu33/ZERO-Starting-AI-Planning-in-PDDL-Descripted-World/issues>Issue跟踪讨论</a></li> </ul> </nav> <div class=repo> <div class=link> </div> <div class=previous><a href=../../CP/LAPKT%E8%BD%BB%E9%87%8F%E8%87%AA%E5%8A%A8%E8%A7%84%E5%88%92%E5%B7%A5%E5%85%B7%E5%8C%85/ >&laquo; Previous</a></div> <div class=next><a href=../%E5%9B%BE%E6%B3%95QNP/ >Next &raquo;</a></div> </div> </aside> <div id=spacer><button class=arrow></button></div> <main> <div class=home-top> <button class=hamburger></button> <a href=../../.. class=site-name> AI Planning in PDDL-Descripted World</a> </div> <div id=main> <nav class=breadcrumbs> <ul> <li>PDDL-Descripted AI Planning World &raquo; </li><li>SolversBaseOnPDDL &raquo; </li><li>GP_Numerical</li> </ul> </nav> <div id=content><p><a href=file:///D:/tridu33/Py/jupyternotebook/QN_GraphPlanner>QN_GraphPlanner本地文件</a></p> <p>Qualitative Number Problem input text file format: Q = &lt; F,V,丨,O,G &gt;</p> <p>其中：</p> <blockquote> <p>状态编码S=<f,v>=一个二进制转十进制的数。如：状态S16={f1,-f2,-f3,v1&gt;0,v2&gt;0}编码为二进制10000即十进制16。经此操作，每个独立S=<f,v>均编码为数字。</p> </blockquote> <ul> <li>F：Boolean proposition </li> </ul> <table> <thead> <tr> <th><span class=arithmatex>\(f_1\)</span></th> <th>...</th> <th><span class=arithmatex>\(f_n\)</span></th> <th><span class=arithmatex>\(-f_1\)</span></th> <th>...</th> <th><span class=arithmatex>\(-f_n\)</span></th> </tr> </thead> <tbody> <tr> <td>1</td> <td>1</td> <td>1</td> <td>0</td> <td>0</td> <td>0</td> </tr> </tbody> </table> <ul> <li>V：</li> </ul> <table> <thead> <tr> <th><span class=arithmatex>\(v_1&gt;0\)</span></th> <th>...</th> <th><span class=arithmatex>\(v_m&gt;0\)</span></th> <th><span class=arithmatex>\(v_1=0\)</span></th> <th>...</th> <th><span class=arithmatex>\(v_m=0\)</span></th> </tr> </thead> <tbody> <tr> <td>0</td> <td>0</td> <td>0</td> <td>1</td> <td>1</td> <td>1</td> </tr> </tbody> </table> <ul> <li> <p>I起始状态</p> </li> <li> <p>G目标状态同样只是一个状态编码。</p> </li> <li> <p>O动作集={a1,a2,a3,a4,...}定义为：到映射，然后允许缺省值自动枚举状态，比如放下石头动作，唯一的直观形式化表示&lt;-E非空手,变成E空手&gt;动作对应的状态变迁 &rarr;。</p> </li> </ul> <p>注：QNP问题中原问题的一般使用V={v1,v2,v3...}作为非确定性动作 <span class=arithmatex>\(a_x\)</span> 的 if conditions条件判断依据，决定着当前状态采取行动<span class=arithmatex>\(a_x\)</span>的后继影响effects。比如积木世界中，确定性动作Pick-above-x捡起来x上方积木，只要if (x上方积木数量n-1 !=0)执行动作Pick-above-x后继状态就是“-clear(x)非空”;if (x上方积木数量n-1 !=0)执行动作Pick-above-x后继状态就是“clear(x)空”。</p> <p>在本算法求解问题的时候，先考虑relaxed problem，放松(动作执行后if condition条件判断决定后续结果effect的)约束，直接暂时先假装动作“Pick-above-x”是非确定的，执行后既有可能clear(x)也有可能-clear(x)。等到使用图论算法找到一条从<span class=arithmatex>\(S_i\)</span>&rarr;<span class=arithmatex>\(S_G\)</span>有向有环通路图<span class=arithmatex>\(G_{Solution}\)</span>之后，再恢复if condition的功能,从生成唯一可执行的动作序列{a1,a1,a1,a2,a3,......}解。</p> <hr> <p>先把标准QNP问题reduce to经典有向图Directed graph问题G=<node节点，edges边>: </p> <p>QNP中S=<f,v>(包括汾,而)有限状态集reduce to图G中的点集Nodes;</p> <p>QNP中的O动作集则reduce to图G中的节点之间有向边Edges。 </p> <p>原问题QNP从此变成一张有向有环图G中，找到一条从<span class=arithmatex>\(S_i\)</span>&rarr;<span class=arithmatex>\(S_G\)</span>有向有环通路图<span class=arithmatex>\(G_{Solution}\)</span>的问题。</p> <ul> <li>算法第一步：利用《系统工程》中的解析结构模型化技术ISM算法，去除孤立节点(缺省值自动枚举的“不可能发生的”状态)，和不包含<span class=arithmatex>\(S_i,S_G\)</span>的**有向有环子图**<span class=arithmatex>\(G_{pruning}\)</span>------至于为什么不从<span class=arithmatex>\(s_i\)</span>开始枚举动作集O破圈搜索到<span class=arithmatex>\(S_G\)</span>呢？感觉也行，结果应该是一样的。反正都是建立一张<span class=arithmatex>\(G=&lt;N,E&gt;\)</span>图，觉得写成矩阵格式的图用ISM算法处理起来更方便。</li> <li>算法第二步：破环，tarjan等图论算法找到SCC，（可逆地）合并SCC强连通分量为“一个个虚拟节点”，原图合并后变成一张**有向无环图**<span class=arithmatex>\(G_{DirectedAcyclicGraph}\)</span>。</li> <li>算法第三步：针对有向无环图<span class=arithmatex>\(G_{DirectedAcyclicGraph}\)</span>，找一条从节点到的路径有很多算法可以实现，可以直接dijkstra找到一条从<span class=arithmatex>\(S_i\)</span>&rarr;<span class=arithmatex>\(S_G\)</span><strong>有向有环通路图</strong><span class=arithmatex>\(G_{HalfSolution}\)</span>。</li> <li>算法第四步：向有环通路图<span class=arithmatex>\(G_{HalfSolution}\)</span>应用第二步的可逆合并操作，解除SCC的合并(第二步要记录入度点和出度点们，SCC还原的时候要用)，得到**有向有环通路图**<span class=arithmatex>\(G_{Solution}\)</span></li> <li>再从放松约束relaxed problem收紧，变成前文提到的“含if条件的确定性动作"，应用V数值的if条件condition判断功能,从图<span class=arithmatex>\(G_{Solution}\)</span>生成唯一可执行的Policy：<span class=arithmatex>\(S_{F,V}\rightarrow O_{actions}\)</span>,可以对应动作序列{a1,a1,a1,a2,a3,......}解。</li> </ul> <p><img alt=qnp图法设计_1598498581_30912 src=../_v_images/qnp%E5%9B%BE%E6%B3%95%E8%AE%BE%E8%AE%A1_1598498581_30912.png></p></div> <footer> <div class=footer-buttons> <div class=previous><a href=../../CP/LAPKT%E8%BD%BB%E9%87%8F%E8%87%AA%E5%8A%A8%E8%A7%84%E5%88%92%E5%B7%A5%E5%85%B7%E5%8C%85/ title=LAPKT轻量自动规划工具包><span>Previous</span></a></div> <div class=next><a href=../%E5%9B%BE%E6%B3%95QNP/ title=图法QNP><span>Next</span></a></div> </div> <div class=footer-note> <p> Built with <a href=http://www.mkdocs.org>MkDocs</a> using <a href=https://github.com/daizutabi/mkdocs-ivory>Ivory theme</a>. </p> </div> </footer> </div> </main> </div> <script>var base_url = '../../..';</script> <script src=../../../js/theme.js></script> <script src=../../../js/umlconvert.js></script> <script src=../../../js/sequence-loader.js></script> <script src=https://unpkg.com/mermaid/dist/mermaid.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.12.0/underscore-min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js></script> <script src=../../../search/main.js></script> </body> </html>